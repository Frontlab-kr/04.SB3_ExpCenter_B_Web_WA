import{_ as k,A as p,E as h,a4 as w,f as b,g,j as u,k as s,q as l,C as r,t as i}from"./index-C9dnf1Oa.js";import{A}from"./AuthPageForKakao-EX78WoLk.js";import{V as N,a as f}from"./VRow-CnMyf8Fy.js";import"./M4_Input-B6jl52l7.js";import"./VTextField-DmwfUhEV.js";import"./VCheckbox-Bxr1PvXB.js";const _={props:["b14Age"],data(){return{reqNo:"",cRequestName:"홍길동",cRequestMobile:"01000000000",cRequestBirth:"19980101",cToken:"",bAgree1:!1,b14AgeUp:!0,NowSelFile:null}},components:{AuthPageForKakao:A},mounted(){window.addEventListener("message",this.callbackResultFromNice)},beforeUnmount(){window.removeEventListener("message",this.callbackResultFromNice)},watch:{},methods:{InitData(){this.bAgree1=!1,this.NowSelFile=null},DownloadAgreeDoc(){p({url:"https://test1-fire.seoul.go.kr/cmsapi/DownloadFile?FileUrl=Files/SystemFile/법정대리인 동의서.hwp",method:"GET",responseType:"blob"}).then(e=>{const t=window.URL.createObjectURL(new Blob([e.data])),o=document.createElement("a");o.href=t,o.setAttribute("download","법정대리인 동의서.hwp"),document.body.appendChild(o),o.click()})},GetFile(){this.$refs.fileInput.click()},onFileSelected(e){this.NowSelFile=e.target.files[0]},NiceAuthCheck(){var e={};p.post("https://test1-fire.seoul.go.kr/cmsapi/NiceAuthCheck",e,{headers:{}}).then(async t=>{this.reqNo=t.data.reqNo;const o=window.open("","popupChk","width=500, height=550, top=100, left=100, fullscreen=no, menubar=no, status=no, toolbar=no, titlebar=yes, location=no, scrollbar=no");if(!o)throw new Error("Popup blocked by the browser");o.document.open(),o.document.write(t.data.formHtml),o.document.close()}).catch(t=>{console.log(`Catch Error : ${t}`)}).finally(()=>{})},callbackResultFromNice(e){if(!(!this.reqNo||!e.data.reqNo)){if(this.reqNo!=e.data.reqNo){h.$emit("onShowMsg",{cSubTitle:"인증이 취소되었습니다.",cTitle:`다시 시도해주세요.
 계속 지속될 경우 담당자에게 문의 바랍니다.`,cMsg:"Error : 유효하지 않은 요청아이디"}),this.reqNo="";return}if(e.data.resultCd!="00"){h.$emit("onShowMsg",{cSubTitle:"인증이 취소되었습니다.",cTitle:`다시 시도해주세요.
 계속 지속될 경우 담당자에게 문의 바랍니다.`,cMsg:"Error : 인증실패"}),this.reqNo="";return}if(e.data.name==""&&e.data.phone==""&&e.data.birth==""){h.$emit("onShowMsg",{cSubTitle:"인증이 취소되었습니다.",cTitle:`다시 시도해주세요.
 계속 지속될 경우 담당자에게 문의 바랍니다.`,cMsg:"Error : 유효하지 않은 인증결과"}),this.reqNo="";return}this.reqNo="",this.checkAuthResult(e.data.name,e.data.phone,e.data.birth,e.data.jwt)}},KakaoAuthCheck(){this.$refs.AuthPageForKakao_ref.ShowDialog()},SuccessKakaoAuth(e){this.checkAuthResult(e.name,e.phone,e.birth,e.jwt)},checkAuthResult(e,t,o,d){let m=e,a=t,c=o;this.$emit("onSuccessAuth",this.NowSelFile,{cRequestName:m,cRequestMobile:a,cRequestBirth:c,jwt:d})}}},C={style:{display:"flex","justify-content":"center"}},q={style:{"max-width":"1000px",width:"100%"}},F={class:"d-sm-none"},S={class:"d-none d-sm-flex center_all"};function R(e,t,o,d,m,a){const c=w("AuthPageForKakao");return b(),g("div",C,[u("div",q,[u("div",F,[s(N,null,{default:l(()=>[s(f,{cols:"12"},{default:l(()=>[s(r,{onClick:t[0]||(t[0]=n=>a.NiceAuthCheck()),width:"100%",size:"x-large",title:"새창열림"},{default:l(()=>[i("휴대전화 인증")]),_:1})]),_:1}),s(f,{cols:"12"},{default:l(()=>[s(r,{onClick:t[1]||(t[1]=n=>a.KakaoAuthCheck()),width:"100%",size:"x-large",title:"새창열림"},{default:l(()=>[i("카카오 인증")]),_:1})]),_:1})]),_:1})]),u("div",S,[s(r,{onClick:t[2]||(t[2]=n=>a.NiceAuthCheck()),size:"x-large",title:"새창열림"},{default:l(()=>[i("휴대전화 인증")]),_:1}),s(r,{onClick:t[3]||(t[3]=n=>a.KakaoAuthCheck()),class:"ml-3",size:"x-large",title:"새창열림"},{default:l(()=>[i("카카오 인증")]),_:1})])]),s(c,{ref:"AuthPageForKakao_ref",onSuccessKakaoAuth:a.SuccessKakaoAuth},null,8,["onSuccessKakaoAuth"])])}const M=k(_,[["render",R]]);export{M as default};
