function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/M4_Reservation_Agree-CgyBI0K8.js","assets/index-BUiFz3UF.js","assets/index-BYn7anhG.css","assets/AuthPageForKakao-fIcH8vG_.js","assets/M4_Input-BXbsDCEU.js","assets/VTextField-ClG4QhFY.js","assets/VTextField-B8CV3Den.css","assets/VRow-bsRTxLLH.js","assets/VCheckbox-B_JcTgeU.js","assets/VCheckbox-CMKdyl0R.css","assets/AuthPageForKakao-C8_EBfgT.css","assets/VRadioGroup-Bh5HQTll.js","assets/VRadioGroup-i2qP9Wu9.css","assets/M4_Reservation_Agree-DHLNwbTX.js","assets/AuthPageForKakao-BcvJnn3e.js","assets/AuthPageForKakao-DytVrRFb.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{_ as C,E as _,A as E,f as r,B as m,q as R,k as d,H as U,j as i,D as I,C as g,G as V,t as b,g as h,F as T,l as f,x as c,i as $,a1 as w,V as N,$ as P,a0 as X,aq as L,s as D,ao as A,aa as x,ab as q,ac as v,ad as Y,a4 as B,an as G}from"./index-BUiFz3UF.js";import{_ as K}from"./M4_Input-BXbsDCEU.js";import{V as z}from"./VDataTable-DCLTN_XD.js";import"./VTextField-ClG4QhFY.js";const H={data(){return{bDialog:!1,questions:[],oLogInfo:{EXP_RSVT_IDX:0,EXP_CD:"",NM:""}}},methods:{DialogClose(){this.bDialog=!1,this.$store.state.isDialog=!1,_.$emit("onBackDialogBtn")},ShowDialog(e){this.bDialog=!0,this.oLogInfo={...e},this.GetExpSurveyInfo(),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},1e3)},GetExpSurveyInfo(){this.questions=[];var e={};E.post("https://test1-fire.seoul.go.kr/cmsapi/GetExpSurveyInfo",e,{headers:{}}).then(s=>{if(s.data.ResultCd==="00")for(let t=0;t<s.data.Result1.length;t++){let a={SURVEY_IDX:s.data.Result1[t].SURVEY_IDX,SURVEY_ITEM_TYPE:s.data.Result1[t].SURVEY_ITEM_TYPE,SURVEY_ITEM_TEXT:s.data.Result1[t].SURVEY_ITEM_TEXT,SURVEY_ITEM_IDX:s.data.Result1[t].SURVEY_ITEM_IDX,REAL_CHECK:0,USER_INPUT:"",options:[]},o=s.data.Result2.filter(n=>n.SURVEY_ITEM_IDX==s.data.Result1[t].SURVEY_ITEM_IDX);for(let n=0;n<o.length;n++)a.options.push({SURVEY_CASE_TEXT:o[n].SURVEY_CASE_TEXT,CHEK_CASE_SER:o[n].SURVEY_CASE_SER}),a.REAL_CHECK=null;o.length==0&&(a.options.push({SURVEY_CASE_TEXT:"",CHEK_CASE_SER:0}),a.USER_INPUT=""),this.questions.push(a)}else _.$emit("onShowMsg",{cSubTitle:"목록 조회 중 문제가 발생했습니다.",cTitle:"계속 지속될 경우 담당자에게 문의 바랍니다.",cMsg:`Error : ${s.data.Msg}`})}).catch(s=>{_.$emit("onShowMsg",{cSubTitle:"목록 조회 중 문제가 발생했습니다.",cTitle:"계속 지속될 경우 담당자에게 문의 바랍니다.",cMsg:`Error : ${s}`})}).finally(()=>{})},SetExpSurveyInfo(){var e=[];for(let t=0;t<this.questions.length;t++)if(this.questions[t].USER_INPUT.trim(),this.questions[t].SURVEY_ITEM_TYPE=="03"&&this.questions[t].USER_INPUT==""){_.$emit("onShowMsg",{cSubTitle:"입력이 누락된 부분이 있습니다.",cTitle:`${t+1}번 항목에 대한 답변을 작성해 주세요`,cMsg:""});return}else e.push({SURVEY_IDX:this.questions[t].SURVEY_IDX,SURVEY_ITEM_IDX:this.questions[t].SURVEY_ITEM_IDX,CHEK_CASE_SER:this.questions[t].REAL_CHECK,USER_INPUT:this.questions[t].USER_INPUT});var s={SITE_CD:"boramea",EXP_CD:this.oLogInfo.EXP_CD,EXP_RSVT_IDX:this.oLogInfo.EXP_RSVT_IDX,NM:this.oLogInfo.NM,SruveyItem:e};E.post("https://test1-fire.seoul.go.kr/cmsapi/SetExpSurveyInfo",s,{headers:{}}).then(t=>{t.data.ResultCd==="00"?(this.DialogClose(),this.$emit("EndSurvey")):_.$emit("onShowMsg",{cSubTitle:"목록 조회 중 문제가 발생했습니다.",cTitle:"계속 지속될 경우 담당자에게 문의 바랍니다.",cMsg:`Error : ${t.data.Msg}`})}).catch(t=>{_.$emit("onShowMsg",{cSubTitle:"목록 조회 중 문제가 발생했습니다.",cTitle:"계속 지속될 경우 담당자에게 문의 바랍니다.",cMsg:`Error : ${t}`})}).finally(()=>{})}}},y=e=>(P("data-v-bf1da32d"),e=e(),X(),e),O={class:"d-flex"},F=y(()=>i("h2",{class:"mb-3"},"설문 조사",-1)),j=y(()=>i("div",{class:"bg-gap-3"},null,-1)),Q={role:"text"},W={key:0},J=["name","value","onUpdate:modelValue","id"],Z=["for"],ee={key:1},te={class:"d-flex flex-wrap mt-4"};function se(e,s,t,a,o,n){const p=K;return r(),m(N,{"aria-modal":"true","onUpdate:modelValue":[n.DialogClose,s[1]||(s[1]=u=>o.bDialog=u)],modelValue:o.bDialog,width:"500px"},{default:R(()=>[d(U,{class:"pa-4"},{default:R(()=>[i("div",O,[F,d(I),d(g,{class:"mt-n1 mr-n3",color:"black",icon:"",onClick:n.DialogClose,title:"닫기",size:"small"},{default:R(()=>[d(V,{"aria-hidden":"true"},{default:R(()=>[b("mdi-close")]),_:1})]),_:1},8,["onClick"])]),j,(r(!0),h(T,null,f(o.questions,(u,S)=>(r(),h("div",{key:S,class:"mb-3"},[i("div",Q,c(S+1)+". "+c(u.SURVEY_ITEM_TEXT),1),u.SURVEY_ITEM_TYPE=="01"?(r(),h("div",W,[(r(!0),h(T,null,f(u.options,(l,M)=>(r(),h("div",{key:M,class:"d-flex ml-2 mt-1 input-group"},[$(i("input",{class:"ml-2",type:"radio",name:S,value:l.CHEK_CASE_SER,"onUpdate:modelValue":k=>u.REAL_CHECK=k,id:"question-"+S+"-"+l.CHEK_CASE_SER},null,8,J),[[w,u.REAL_CHECK]]),i("label",{class:"ml-3",for:"question-"+S+"-"+l.CHEK_CASE_SER},c(l.SURVEY_CASE_TEXT),9,Z)]))),128))])):(r(),h("div",ee,[d(p,{"hide-details":"",modelValue:u.USER_INPUT,"onUpdate:modelValue":l=>u.USER_INPUT=l,label:"답 입력","aria-label":"",placeholder:""},null,8,["modelValue","onUpdate:modelValue"])]))]))),128)),i("div",te,[d(I),d(g,{onClick:s[0]||(s[0]=u=>n.SetExpSurveyInfo()),class:"mb-1",color:"primary",width:"100",title:"새창열림"},{default:R(()=>[b(c(e.$t("all_btn_save")),1)]),_:1})])]),_:1})]),_:1},8,["onUpdate:modelValue","modelValue"])}const ae=C(H,[["render",se],["__scopeId","data-v-bf1da32d"]]),oe={data(){return{bUseWA:"false",cRequestName:"",cRequestMobile:"",cRequestBirth:"",cToken:"",iSurveyIndex:-1,headers:[{title:this.$t("all_table_header_번호"),key:"iIndex",sortable:!1,align:"center"},{title:this.$t("all_table_header_장소"),key:"cPlaceNm",sortable:!1,align:"center"},{title:this.$t("all_table_header_프로그램"),key:"EXP_PRGRM_NM",sortable:!1,align:"center"},{title:this.$t("all_table_header_날짜/시간"),key:"cShowCreateDateTime",sortable:!1,align:"center"},{title:this.$t("all_table_header_신청자이름"),key:"NM",sortable:!1,align:"center"},{title:this.$t("all_table_header_예약인원"),key:"iTotalCnt",sortable:!1,align:"center"},{title:this.$t("all_table_header_예약상태"),key:"RSVT_STTS",sortable:!1,align:"center"},{title:"이수증 발급",key:"cAction",sortable:!1,align:"center"}],zData:[],REG_SN:-1}},components:{},mounted(){},beforeUnmount(){},methods:{ShowDispalyList(e){this.cRequestName=e.cRequestName,this.cRequestMobile=e.cRequestMobile,this.cRequestBirth=e.cRequestBirth,this.cToken=e.jwt,this.GetCertificationList()},GetCertificationList(){var e={SITE_CD:"boramea",BKR_NM:this.cRequestName,BKR_MBL_TELNO:this.cRequestMobile,Birth:this.cRequestBirth,Token:this.cToken};E.post("https://test1-fire.seoul.go.kr/cmsapi/GetCertificationList",e,{headers:{}}).then(s=>{if(s.data.ResultCd==="00"){let t=s.data.Result.length;this.zData=s.data.Result.map((a,o)=>(a.iIndex=t-o,a.cPlaceNm=L("boramea"),a.cShowCreateDateTime=`${a.RSVT_DT.substring(0,10)}/${a.RSVT_TIME_CD.substring(3,5)}시`,a))}else _.$emit("onShowMsg",{cSubTitle:"이수증 정보 조회 중 문제가 발생했습니다.",cTitle:"계속 지속될 경우 담당자에게 문의 바랍니다.",cMsg:`Error : ${s.data.Msg}`})}).catch(s=>{_.$emit("onShowMsg",{cSubTitle:"이수증 정보 조회 중 문제가 발생했습니다.",cTitle:"계속 지속될 경우 담당자에게 문의 바랍니다.",cMsg:`Error : ${s}`})}).finally(()=>{})},cStateToKorean(e){return e=="R"?"예약":e=="X"?"체험불참":e=="E"?"체험완료":"예약취소"},ShowSurveyDialog(e){e&&(this.iSurveyIndex=this.zData.indexOf(e),this.REG_SN=e.REG_SN,this.$refs.M4_Msgbox_ref.ShowReturn("이수증 발급을 위해서는 설문조사 참여가 필요합니다.","",""),this.$store.state.btnDialogRef=document.activeElement)},onResult(){this.$refs.M4_ExpSurvey_ref.ShowDialog({EXP_RSVT_IDX:this.zData[this.iSurveyIndex].EXP_RSVT_IDX,EXP_CD:this.zData[this.iSurveyIndex].EXP_CD,NM:this.cRequestName})},async EndSurvey(){if(_.$emit("onBackDialogMsgBtn"),this.REG_SN==-1){_.$emit("onShowMsg",{cSubTitle:"이수증 출력이 불가합니다.",cTitle:"계속 지속될 경우 담당자에게 문의 바랍니다.",cMsg:""});return}var e=await this.SetCertificateReportPrinter();if(e.data.ResultCd!="00"){_.$emit("onShowMsg",{cSubTitle:"이수증 출력이 불가합니다.",cTitle:"계속 지속될 경우 담당자에게 문의 바랍니다.",cMsg:""});return}var s={RegSn:String(this.REG_SN),Name:this.cRequestName,TelNo:this.cRequestMobile,Birth:this.cRequestBirth,Token:this.cToken,SITE_CD:"boramea",EXP_CD:this.zData[this.iSurveyIndex].EXP_CD,EXP_RSVT_IDX:this.zData[this.iSurveyIndex].EXP_RSVT_IDX,REQUEST_NM:this.cRequestName};E.post("https://test1-fire.seoul.go.kr/cmsapi/GenerateCertificateReportAuthCode",s,{headers:{}}).then(t=>{if(t.data.ResultCd==="00")if(this.bUseWA!="true"){console.log("res.data.Result[0].authToken",t.data.Result[0].authToken);const a=`https://test1-fire.seoul.go.kr/cmsuig/report/viewFinishReport?regSn=${s.RegSn}&authToken=${t.data.Result[0].authToken}`;window.open(a,"_blank","width=850,height=800")}else this.GetCertificateReportPDF();else _.$emit("onShowMsg",{cSubTitle:"이수증 출력 중 문제가 발생했습니다.",cTitle:"계속 지속될 경우 담당자에게 문의 바랍니다.",cMsg:`Error : ${t.data.Msg}`})}).catch(t=>{_.$emit("onShowMsg",{cSubTitle:"이수증 출력 중 문제가 발생했습니다.",cTitle:"계속 지속될 경우 담당자에게 문의 바랍니다.",cMsg:`Error : ${t}`})}).finally(()=>{})},GetCertificateReportPDF(){var e={RegSn:String(this.REG_SN),Name:this.cRequestName,TelNo:this.cRequestMobile,Birth:this.cRequestBirth,Token:this.cToken,SITE_CD:"boramea",EXP_CD:this.zData[this.iSurveyIndex].EXP_CD,EXP_RSVT_IDX:this.zData[this.iSurveyIndex].EXP_RSVT_IDX,REQUEST_NM:this.cRequestName,REQUEST_URL:"https://test1-fire.seoul.go.kr/cmsuig/report/viewFinishReport"};E.post("https://test1-fire.seoul.go.kr/cmsapi/GetCertificateReportPDF",e,{responseType:"blob"}).then(s=>{const t=new Blob([s.data],{type:"application/pdf"}),a=window.URL.createObjectURL(t),o=document.createElement("a");o.href=a,o.setAttribute("download","이수증.pdf"),document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(a)}).catch(s=>{_.$emit("onShowMsg",{cSubTitle:"이수증 출력 중 문제가 발생했습니다.",cTitle:"계속 지속될 경우 담당자에게 문의 바랍니다.",cMsg:`Error : ${s}`})}).finally(()=>{})},DownloadFile(e){E({url:"https://test1-fire.seoul.go.kr/cmsapi/DownloadFile?FileUrl=Files/SystemFile/"+e,method:"GET",responseType:"blob"}).then(s=>{const t=window.URL.createObjectURL(new Blob([s.data])),a=document.createElement("a");a.href=t,a.setAttribute("download",e),document.body.appendChild(a),a.click()})},SetCertificateReportPrinter(){var e={RegSn:String(this.REG_SN),REQUEST_NM:this.cRequestName};return new Promise(s=>E.post("https://test1-fire.seoul.go.kr/cmsapi/SetCertificateReportPrinter",e,{headers:{}}).then(t=>{s(t)}).catch(t=>{s({data:{ResultCd:"98",Msg:t}})}))}}},ie={class:"title-xxlarge"},le={class:"mt-2 pa-3"},ne={class:"nor_table_center"},re={id:"table-caption",class:"sr-only"};function ce(e,s,t,a,o,n){const p=A,u=ae;return r(),h("div",null,[i("h1",ie,c(e.$t("menu_0303_이수증발급")),1),i("div",le,[d(z,{headers:o.headers,items:o.zData,"item-key":"EXP_RSVT_IDX","aria-labelledby":"table-caption"},{default:R(S=>[i("table",ne,[i("caption",re,c(e.$t("menu_0302_예약조회"))+" 테이블",1),i("thead",null,[i("tr",null,[(r(!0),h(T,null,f(S.headers[0],l=>(r(),h("th",{key:l.value,scope:"col"},c(l.title),1))),128))])]),i("tbody",null,[(r(!0),h(T,null,f(S.items,l=>(r(),h("tr",{key:l.id},[i("td",null,c(l.iIndex),1),i("td",null,c(l.cPlaceNm),1),i("td",null,c(l.EXP_PRGRM_NM),1),i("td",null,c(l.cShowCreateDateTime),1),i("td",null,c(l.NM),1),i("td",null,c(l.iTotalCnt),1),i("td",null,c(n.cStateToKorean(l.RSVT_STTS)),1),i("td",null,[l.RSVT_STTS=="E"?(r(),m(g,{key:0,onClick:M=>n.ShowSurveyDialog(l)},{default:R(()=>[b("보기")]),_:2},1032,["onClick"])):D("",!0)])]))),128))])])]),_:1},8,["headers","items"])]),d(p,{onOnResult:n.onResult,ref:"M4_Msgbox_ref"},null,8,["onOnResult"]),d(u,{onEndSurvey:n.EndSurvey,ref:"M4_ExpSurvey_ref"},null,8,["onEndSurvey"])])}const _e=C(oe,[["render",ce]]),ue={data(){return{local_site_component:null,bAgree:!0,bDataList:!1}},components:{DataList:_e},mounted(){this.loadDynamicComponent()},beforeUnmount(){},methods:{async loadDynamicComponent(){try{const e=x(()=>q(Object.assign({"./en/M4_Reservation_Agree.vue":()=>v(()=>import("./M4_Reservation_Agree-CgyBI0K8.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])),"./ko/M4_Reservation_Agree.vue":()=>v(()=>import("./M4_Reservation_Agree-DHLNwbTX.js"),__vite__mapDeps([13,1,2,14,4,5,6,7,8,9,15,11,12]))}),`./${this.$i18n.locale}/M4_Reservation_Agree.vue`));this.local_site_component=Y(e)}catch(e){console.error("컴포넌트를 로드하는 중 에러가 발생했습니다:",e)}},onSuccessAuth(e,s){this.bAgree=!1,this.bDataList=!0,this.$nextTick(()=>{this.$refs.DataList_ref.ShowDispalyList(s)})}}};function he(e,s,t,a,o,n){const p=B("DataList");return r(),h("div",null,[o.bAgree?(r(),m(G(o.local_site_component),{key:0,b14Age:!1,class:"mb-2",onOnSuccessAuth:n.onSuccessAuth},null,40,["onOnSuccessAuth"])):D("",!0),o.bDataList?(r(),m(p,{key:1,ref:"DataList_ref"},null,512)):D("",!0)])}const pe=C(ue,[["render",he]]);export{pe as default};
